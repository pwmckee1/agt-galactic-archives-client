<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a routerLink="/regions" class="text-decoration-none">Regions</a></li>
    <li class="breadcrumb-item active text-light" aria-current="page">{{ regionId ? 'Edit Archive' : 'New Survey' }}</li>
  </ol>
</nav>

<header class="mb-4">
  <h1>
    {{ currentRegion ? currentRegion.regionName : 'Document New Region' }}
    @if (currentRegion) {
      <small class="fs-5 d-block">{{ currentRegion.galaxy }} Galaxy</small>
    }
  </h1>
</header>

<form [formGroup]="regionForm" (ngSubmit)="save()">
  <div class="grid">
    <!-- Left Column: Core Data -->
    <div class="col-12 md:col-8">
      <div class="card bg-dark text-light border-secondary mb-4">
        <div class="card-header border-secondary bg-black bg-opacity-25">
          <h5 class="mb-0
"><i class="fa-solid fa-info-circle me-2"></i>Survey Details</h5>
        </div>
        <div class="card-body">
          <div class="grid row-gap-3">
            <div class="col-12 md:col-6 flex flex-column gap-2">
              <label class="form-label">Region Name</label>
              <input type="text" class="p-inputtext bg-dark text-light border-secondary w-full" formControlName="regionName"
                     placeholder="e.g. Ocopadica">
            </div>
            <div class="col-12 md:col-6 flex flex-column gap-2">
              <label class="form-label">Legacy Name (if any)</label>
              <input type="text" class="p-inputtext bg-dark text-light border-secondary w-full" formControlName="legacyName">
            </div>
            <div class="col-12 md:col-6 flex flex-column gap-2">
              <label class="form-label">Galaxy</label>
              <select class="p-inputtext bg-dark text-light border-secondary w-full" formControlName="galaxy">
                <option [ngValue]="null">Select Galaxy...</option>
                <option value="Euclid">Euclid</option>
                <option value="Eissentam">Eissentam</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">Quadrant</label>
              <select class="form-select bg-dark text-light border-secondary" formControlName="galacticQuadrant">
                <option value="Alpha">Alpha</option>
                <option value="Beta">Beta</option>
                <option value="Gamma">Gamma</option>
                <option value="Delta">Delta</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">Galactic Coordinates</label>
              <input type="text" class="form-control bg-dark text-light border-secondary"
                formControlName="galacticCoordinates" placeholder="0485:0084:0D54:xxxx">
            </div>
            <div class="col-md-6">
              <label class="form-label">Distance from Centre (LY)</label>
              <input type="number" class="form-control bg-dark text-light border-secondary"
                formControlName="lightYearsFromCenter">
            </div>
            <div class="col-12 md:col-4 flex flex-column gap-2">
              <label class="form-label">Galactic Coordinates</label>
              <input type="text" class="p-inputtext bg-dark text-light border-secondary w-full"
                     formControlName="galacticCoordinates" placeholder="0000:0000:0000:0000">
            </div>
            <div class="col-12 md:col-4 flex flex-column gap-2">
              <label class="form-label">Region Age</label>
              <input type="number" class="p-inputtext bg-dark text-light border-secondary w-full" formControlName="regionAge">
            </div>
          </div>

          <hr class="my-4 border-secondary">

          <div class="mb-3 flex flex-column gap-2">
            <label class="form-label">Summary & Lore</label>
            <textarea class="p-inputtext bg-dark text-light border-secondary w-full" formControlName="summaryNotes" rows="4"
                      placeholder="Brief history or description of the region..."></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Location Notes</label>
            <textarea class="form-control bg-dark text-light border-secondary" formControlName="locationNotes" rows="2"
            placeholder="Navigation tips..."></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Civilized Space Notes</label>
            <textarea class="form-control bg-dark text-light border-secondary" formControlName="civilizedSpaceNotes"
            rows="2" placeholder="Factions, hubs, or settlements..."></textarea>
          </div>
        </div>
      </div>

      <div class="card bg-dark text-light border-secondary mb-4">
        <div class="card-header border-secondary bg-black bg-opacity-25">
          <h5 class="mb-0
"><i class="fa-solid fa-link me-2"></i>External Archives</h5>
        </div>
        <div class="card-body">
          <div class="grid row-gap-3">
            <div class="col-12 md:col-6 flex flex-column gap-2">
              <label class="form-label">Wiki Link</label>
              <input type="url" class="p-inputtext bg-dark text-light border-secondary w-full" formControlName="wikiLink">
            </div>
            <div class="col-md-6">
              <label class="form-label">Legacy Wiki Link</label>
              <input type="url" class="form-control bg-dark text-light border-secondary"
                formControlName="legacyWikiLink">
            </div>
            <div class="col-md-6">
              <label class="form-label">Video Link</label>
              <input type="url" class="form-control bg-dark text-light border-secondary" formControlName="videoLink">
            </div>
            <div class="col-md-6">
              <label class="form-label">External Reference</label>
              <input type="url" class="form-control bg-dark text-light border-secondary" formControlName="externalLink">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column: Metadata & Actions -->
    <div class="col-12 md:col-4">
      <div class="card bg-dark text-light border-secondary mb-4">
        <div class="card-header border-secondary bg-black bg-opacity-25">
          <h5 class="mb-0
"><i class="fa-solid fa-user-astronaut me-2"></i>Survey Metadata</h5>
        </div>
        <div class="card-body">
          <div class="mb-3 flex flex-column gap-2">
            <label class="form-label">Surveyed By</label>
            <input type="text" class="p-inputtext bg-dark text-light border-secondary w-full" formControlName="surveyedBy">
          </div>
          <div class="mb-3">
            <label class="form-label">Survey Date</label>
            <input type="date" class="form-control bg-dark text-light border-secondary" formControlName="surveyDate">
          </div>
          <div class="mb-3">
            <label class="form-label">Game Release</label>
            <input type="text" class="form-control bg-dark text-light border-secondary" formControlName="gameRelease"
              placeholder="e.g. Omega, Orbital">
          </div>
          <div class="mb-3">
            <label class="form-label">Platform</label>
            <input type="text" class="form-control bg-dark text-light border-secondary" formControlName="gamePlatform"
              placeholder="PC, PS5, etc.">
          </div>
        </div>
      </div>

      <div class="card bg-dark text-light border-secondary mb-4">
        <div class="card-header border-secondary bg-black bg-opacity-25">
          <h5 class="mb-0
"><i class="fa-solid fa-history me-2"></i>History</h5>
        </div>
        <div class="card-body small">
          <div class="mb-3">
            <label class="form-label">Earliest Known Surveyor</label>
            <input type="text" class="form-control form-control-sm bg-dark text-light border-secondary"
              formControlName="earliestKnownSurveyor">
          </div>
          <div class="mb-3">
            <label class="form-label">Latest Known Surveyor</label>
            <input type="text" class="form-control form-control-sm bg-dark text-light border-secondary"
              formControlName="latestKnownSurveyor">
          </div>
          <div class="mb-3">
            <label class="form-label text-warning">Lowest Known Phantom System</label>
            <input type="text" class="form-control form-control-sm bg-dark text-light border-secondary"
              formControlName="lowestKnownPhantomSystem">
          </div>
        </div>
      </div>

      <div class="flex flex-column gap-2">
        <button type="submit" class="p-button p-button-warning py-2 w-full justify-content-center" [disabled]="regionForm.invalid">
          <i class="fa-solid fa-save me-2"></i>Update Archive
        </button>
        <a routerLink="/regions" class="p-button p-button-outlined p-button-secondary w-full justify-content-center text-decoration-none">Cancel</a>
      </div>
    </div>
  </div>
</form>
